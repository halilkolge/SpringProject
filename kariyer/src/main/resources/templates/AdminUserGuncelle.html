<!DOCTYPE html>
<html lang="en
" xmlns:th="http://www.thymeleaf.org"
>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content=" initial-scale=1, maximum-scale-1, shrink-to-fit=yes"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>TEZ | Kayıt Ol</title>
    <link th:href="@{/css/pace.min.css}" rel="stylesheet"/>
    <script th:src="@{/js/pace.min.js}"></script>
    <!--favicon-->
    <link rel="icon" th:href="@{/images/logo.png}" type="image/x-icon">
    <!-- Bootstrap core CSS-->
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <!-- animate CSS-->
    <link th:href="@{/css/animate.css}" rel="stylesheet" type="text/css"/>
    <!-- Icons CSS-->
    <link th:href="@{/css/icons.css}" rel="stylesheet" type="text/css"/>
    <!-- Custom Style-->
    <link th:href="@{/css/app-style.css}" rel="stylesheet"/>
</head>
<body>


<!-- Start wrapper-->
<div id="wrapper">

    <div class="height-100v d-flex align-items-center justify-content-center">
        <div class="card-authentication2">
            <div class="card-group">
                <!--                <div class="card mb-0">-->
                <!--                    <div class="bg-reset-password2 hidden-xs"></div>-->
                <!--                    <div class="card-img-overlay rounded-left my-2 js-tilt" data-tilt>-->
                <!--                    </div>-->
                <!--                </div>-->

                <div class="card mb-0 ">
                    <div class="card-body">
                        <div class="card-content p-3">
                            <div class="card-title text-uppercase text-center py-3">Kullanıcı Güncelle</div>
                            <form id="FormSave">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label >İsim</label>
                                            <input type="text" id="ad" class="form-control" th:value="${user.name}" aria-describedby="emailHelp" placeholder="Kullanıcı İsmi">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label >Soyisim</label>
                                            <input type="text" id="soyad" class="form-control" th:value="${user.surname}" aria-describedby="emailHelp" placeholder="Soyisminiz">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label >Email address</label>
                                            <input type="email" id="email" class="form-control" th:value="${user.email}" aria-describedby="emailHelp" placeholder="Enter email">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label >Kullanıcı Adı</label>
                                            <input type="text" id="username" class="form-control" th:value="${user.username}" aria-describedby="emailHelp" placeholder="Kullanıcı Adınız">
                                        </div>
                                    </div>
                                </div>

                                <div class="row" style="margin-bottom: 2vh">
                                    <div class="form-group">

                                        <div class="icheck-material-success icheck-inline">
                                            <input type="radio" id="inline-radio-success" name="durum"
                                                   checked value=1>
                                            <label for="inline-radio-success">Bireysel</label>
                                        </div>
                                        <div class="icheck-material-primary icheck-inline">
                                            <input type="radio" id="inline-radio-primary" name="durum"
                                                   value=2>
                                            <label for="inline-radio-primary">Kurumsal</label>
                                        </div>
                                        <div class="icheck-material-primary icheck-inline">
                                            <input type="radio" id="inline-radio-primary" name="durum"
                                                   value=2>
                                            <label for="inline-radio-primary">Admin</label>
                                        </div>
                                    </div>
                                </div>


                                <button type="submit" class="btn btn-primary btn-block waves-effect waves-light">Güncelle</button>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Start Back To Top Button-->
    <a href="javaScript:void(0);" class="back-to-top"><i class="fa fa-angle-double-up"></i> </a>
    <!--End Back To Top Button-->

</div><!--wrapper-->





<!-- Bootstrap core JavaScript-->
<script th:src="@{/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js}"></script>


<!-- Bootstrap core JavaScript-->
<script th:src="@{/js/jquery.min.js}"></script>
<script th:src="@{/js/popper.min.js}"></script>
<script th:src="@{/js/bootstrap.min.js}"></script>
<script th:src="@{/js/bildirim.js}"></script>

<!-- simplebar js -->
<script th:src="@{/plugins/simplebar/js/simplebar.js}"></script>
<!-- sidebar-menu js -->
<script th:src="@{/js/sidebar-menu.js}"></script>

<!-- Custom scripts -->
<script th:src="@{/js/app-script.js}"></script>

<script th:src="@{/plugins/notifications/js/lobibox.min.js}"></script>
<script th:src="@{/plugins/notifications/js/notifications.min.js}"></script>
<script th:src="@{/plugins/notifications/js/notification-custom-script.js}"></script>
<!--Form Validatin Script-->
<script th:src="@{/plugins/jquery-validation/js/jquery.validate.min.js}"></script>
<script th:src="@{/js/jquery-serialize.min.js}"></script>
<script>
    var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = window.location.search.substring(1),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
            }
        }
        var ulke = document.getElementById(ulke);
    };

    $(document).ready(function () {

        var checked ;

        $("#FormSave").validate({

            submitHandler: function (form) {
                $('#loading-screen').fadeIn();
                console.log(checked);
                var id = getUrlParameter('id');
                if(document.getElementById("inline-radio-primary").checked){
                    checked=2;
                }else if(document.getElementById("inline-radio-success").checked) {
                    checked=1;
                }
                    var formData = {
                        "id" : id,
                        "name": $("#ad").val(),
                        "surname": $("#soyad").val(),
                        "email": $("#email").val(),
                        "username": $("#username").val(),
                        "roles" : checked,

                    }
                console.log(formData);
                $.ajax({
                    type: "POST",
                    contentType: "application/json",
                    url: "/admin/save",
                    data: JSON.stringify(formData),
                    dataType: 'json',
                    cache: false,
                    timeout: 60000,

                    success: function (data) {
                        $('#loading-screen').fadeOut('slow');
                        if(data.result){
                            console.log(data);
                            success_noti_custom(data.message);
                            setTimeout(function() {
                                window.location.replace("/anasayfa");
                            }, 2000);
                        }
                        else{
                            error_noti_yuk(data.message);
                            console.log(data.message+" sdfasdf")
                        }
                    },
                    error: function (e) {
                        console.log("ERROR : ", e);
                        $("#btn-login").prop("disabled", false);
                    }
                });
                return false;
            }
        });





    });
</script>
</body>
</html>